# YouTube 新着通知 & 終了45秒前リマインド

YouTubeの特定チャンネルの新着動画を自動で通知し、動画視聴時に終了45秒前に高評価を促すリマインド通知を表示するChrome拡張機能です。

## 機能

### 🔔 新着動画通知
- 指定したYouTubeチャンネルの新着動画を自動検知
- 設定した曜日・時刻に新着をチェック
- Shorts動画は除外し、長尺動画のみを通知
- 通知から直接動画を開くことが可能

### ⏰ 終了45秒前リマインド
- YouTube動画視聴中に終了45秒前を検知
- 高評価を促すリマインド通知を表示
- 画面右下にインライン通知も表示
- 短時間動画（60秒未満）は除外

## インストール

1. このリポジトリをクローンまたはダウンロード
```bash
git clone https://github.com/your-username/yt-reminder-exl.git
```

2. Chrome拡張機能の開発者モードを有効化
   - Chrome設定 → 拡張機能 → 開発者モードをON

3. 「パッケージ化されていない拡張機能を読み込む」をクリック

4. ダウンロードしたフォルダを選択

## 設定

拡張機能をインストール後、設定画面で以下を設定できます：

### Channel ID
- 通知対象のYouTubeチャンネルID
- デフォルト: `UCwjx6ZG4pwCvAPSozYEWymA`（エンジニア転職チャンネル）

### チェック時刻
- 新着動画をチェックする時刻（JST）
- 複数指定可能（カンマ区切り）
- デフォルト: `19:02`

### 対象曜日
- 新着チェックを行う曜日
- 0=日曜日、1=月曜日、...、6=土曜日
- デフォルト: `3,6`（水曜日・土曜日）

## 技術仕様

### ファイル構成
```
yt-reminder-exl/
├── manifest.json          # 拡張機能の設定
├── background.js          # バックグラウンド処理（新着チェック）
├── content.js            # コンテンツスクリプト（終了前通知）
├── options.html          # 設定画面
├── options.js            # 設定画面のロジック
├── privacy.html          # プライバシーポリシー
└── icons/               # アイコンファイル
    ├── icon16.png
    ├── icon48.png
    └── icon128.png
```

### 使用技術
- **Manifest V3**: 最新のChrome拡張機能仕様
- **Service Worker**: バックグラウンド処理
- **Content Scripts**: YouTube動画ページでの処理
- **Chrome APIs**: 
  - `chrome.alarms`: 定期実行
  - `chrome.notifications`: 通知表示
  - `chrome.storage`: 設定保存

### 主要機能の仕組み

#### 新着動画検知
1. RSS Feed（`https://www.youtube.com/feeds/videos.xml?channel_id=`）から最新動画を取得
2. Shorts動画を除外（URL・タイトルで判定）
3. 前回通知した動画IDと比較して新着を判定
4. 新着があれば通知を表示

#### 終了前リマインド
1. YouTube動画ページでvideo要素を監視
2. `timeupdate`イベントとポーリングで残り時間を計算
3. 残り45秒以下になったらリマインド通知を送信
4. SPA遷移にも対応

## 開発

### 必要な権限
- `alarms`: 定期実行のため
- `notifications`: 通知表示のため  
- `storage`: 設定保存のため
- `https://www.youtube.com/feeds/videos.xml*`: RSS取得のため

### デバッグ
- バックグラウンドスクリプト: 拡張機能管理画面の「Service Worker」をクリック
- コンテンツスクリプト: YouTube動画ページでF12開発者ツール

### カスタマイズ
- `DEFAULTS`オブジェクトでデフォルト設定を変更可能
- `THRESHOLD`で終了前通知のタイミングを調整可能
- `MIN_DURATION`で通知対象動画の最小長を設定可能

## ライセンス

MIT License

## 注意事項

- YouTube APIは使用せず、RSS Feedを利用しているため、API制限はありません
- 通知の精度はRSS Feedの更新頻度に依存します
- プライベートチャンネルや限定公開動画は検知できません

## 備考
このアプリケーションは「完成品を提供する」ことが目的ではありません。

もし不具合を見つけたり、追加したい機能を思いついたら、ぜひ自分でフォークやクローンして挑戦してみてください。

- 「通知のデザインを変える」
- 「Slackにも連携する」
- 「動画タイトルを整形する」

など、自由に改造できますし、公開まで取り組めば、より実践的な経験になります。ぜひ挑戦してみてください。
